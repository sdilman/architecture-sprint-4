# Проблемные места

## Существующие

- **Неэффективные запросы от MES к SHOP DB**
  - Возможные причины:
    - Как сами запросы, так и поток данных через очередь и CRM неэффективны.
  - Подтверждение: Жалобы от операторов на долгую загрузку страницы с заказами.
  - Негативные последствия:
  - Возможные решения:
    1. **Обращаться из MES к SHOP DB напрямую**
       - *Плюсы*: Ускорение работы.
       - *Минусы*: Повышается связность между компонентами системы, дублируется функционал запросов (есть очередь).
    2. **Внедрить кэш на уровне MES для хранения списка всех нераспределенных заказов**
       - *Плюсы*: Связность между компонентами остается низкой.
       - *Минусы*: Информация о нераспределённых заказах не полностью актуальна.

- **Недоставка или несвоевременная доставка сообщений о заказах и о статусе заказов между MES и CRM**
  - Возможные причины: 
    - Сбои в работе очереди (Rabbit MQ) в результате которых теряются результаты запросов.
  - Подтверждение: Жалобы от клиентов на долгое исполнение заказа. Подтверждено, что задержки на стороне производства отсутствуют.
  - Возможные решения:
    1. **Усилить пропускную способность очереди**

- **Общая проблема: Отсутствие логиования**
  - Негативные последствия: Не представляется возможным проделать анализ поведения системы и выявить причины сбоев.
  - Возможные решения: В каждой из подсистем определить узловые точки воркфлоу и информацию для логирования и сохрянять ее стандартными для данной подсистемы следствами ллогирования.

- **Общая проблема: Отсутствие трассировки**
  - Негативные последствия: Не представляется возможным проследить где застрял или потерялся заказ клиента.
  - Возможные решения: Внедрить трассировку обработки заказа. Снабдить каждый запрос идентификатором trace_id и сохранять его в логах каждой из подсистем участвующих в пути запроса и ответа. Использовать стандартное ПО для трассировки.

## Потенциальные

- **Отсутствие мониторинга**
  - Негативные последствия: Не представляется возможным своевременно прореагировать на нарастающую нагрузку на подсистемы.
  - Возможные решения: 
    1. Создаь список метрик исходя из имеющихся бизнес-спроцессов и внести в подсистемы замеры указанных метрик стандартными для подсистемы средствами.

- **Нагрузка на хранилище 3D образов**
  - Предположительно нагрузка на хранилище будет возрастать.
  - Также будет повышаться объем хранилища 3D образов.
  - Возможные решения:
    1. Проанализировать имеющиеся базы данных, выбрать альтернативную.
    2. Изучить возможность Postgres по оптимизации и масштабированию. Применить. 

## Инициативы по устранению нежелательных ситуаций

  Описаны в пунктах "Возможные решения" выше.